```{r}
#install.packages("tidyjson") 
  
library(tidyjson) 
library(dplyr) 
  
#Read the JSON data 
json_data <- jsonlite::fromJSON("green-p-parking-2019.json") 
  
#Convert the R object to a data frame 
df <- as.data.frame(json_data) 
  
#View the data frame 
head(df)

```
```{r}
# Extract required columns from main data
data<- data.frame(address=df$carparks.address,
                                     lat=df$carparks.lat,
                                     lng=df$carparks.lng,
                                      carpark_type=df$carparks.carpark_type_str,
                                      rate_half_hr=df$carparks.rate_half_hour,
                                      capacity=df$carparks.capacity
                  )
```

```{r}
# Check class of each attribute
sapply(data, class) 
```
```{r}
# Convert char to numeric class

data$lat<-as.numeric(data$lat)
data$lng<-as.numeric(data$lng)
data$rate_half_hr<-as.numeric(data$rate_half_hr)
data$capacity<-as.numeric(data$capacity)

```
```{r}
sapply(data, class) 
```

```{r}
# Check for missing values
any(is.na(data))
```

```{r}
library(stringr)

# Extract street name from address
data <- data %>%
  mutate(extracted_address = str_replace_all(data$address, "\\(.*?\\)",""))

data$extracted_address<-str_replace_all(data$extracted_address, "-.*", "")
data$extracted_address<-str_replace_all(data$extracted_address, ",.*", "")

```


```{r}
print(df$carparks.rate_details$periods[2][1])

```

